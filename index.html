<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Stickman Brawl - 졸라맨 격투</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- 메인 메뉴 -->
    <div id="menu-screen" class="screen active">
        <h1>🥊 Stickman Brawl</h1>
        <h2>졸라맨 격투</h2>
        <div class="menu-buttons">
            <button id="create-room-btn" class="menu-btn">방 만들기</button>
            <button id="join-room-btn" class="menu-btn">방 입장하기</button>
        </div>
    </div>

    <!-- 방 만들기 화면 -->
    <div id="create-screen" class="screen">
        <h2>방 만들기</h2>
        <div class="room-code-display">
            <p>방 코드:</p>
            <div id="room-code" class="code"></div>
            <p class="waiting-text">상대방을 기다리는 중...</p>
        </div>
        <button id="cancel-create-btn" class="menu-btn secondary">취소</button>
    </div>

    <!-- 방 입장 화면 -->
    <div id="join-screen" class="screen">
        <h2>방 입장하기</h2>
        <div class="join-form">
            <input type="text" id="room-code-input" placeholder="방 코드 입력" maxlength="6">
            <button id="join-btn" class="menu-btn">입장</button>
        </div>
        <p id="join-error" class="error-text"></p>
        <button id="cancel-join-btn" class="menu-btn secondary">취소</button>
    </div>

    <!-- 게임 화면 -->
    <div id="game-screen" class="screen">
        <!-- 체력바 + MP바 -->
        <div class="status-bars">
            <div class="player-status player1">
                <span class="player-label">P1</span>
                <div class="bars-wrapper">
                    <div class="bar-container health-bar">
                        <div id="health-p1" class="bar-fill health-fill"></div>
                    </div>
                    <div class="bar-container mp-bar">
                        <div id="mp-p1" class="bar-fill mp-fill"></div>
                    </div>
                </div>
            </div>
            <div class="player-status player2">
                <span class="player-label">P2</span>
                <div class="bars-wrapper">
                    <div class="bar-container health-bar">
                        <div id="health-p2" class="bar-fill health-fill"></div>
                    </div>
                    <div class="bar-container mp-bar">
                        <div id="mp-p2" class="bar-fill mp-fill"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 게임 캔버스 -->
        <canvas id="game-canvas"></canvas>

        <!-- 모바일 컨트롤 -->
        <div class="mobile-controls">
            <div class="control-left">
                <button class="ctrl-btn" data-action="left">◀</button>
                <button class="ctrl-btn" data-action="right">▶</button>
            </div>
            <div class="control-right">
                <button class="ctrl-btn attack" data-action="punch">👊</button>
                <button class="ctrl-btn attack" data-action="kick">🦶</button>
                <button class="ctrl-btn attack" data-action="jump">⬆</button>
                <button class="ctrl-btn attack skill" data-action="skill">⚡</button>
            </div>
        </div>
    </div>

    <!-- 게임 결과 화면 -->
    <div id="result-screen" class="screen">
        <h2 id="result-text"></h2>
        <button id="rematch-btn" class="menu-btn">다시 하기</button>
        <button id="back-menu-btn" class="menu-btn secondary">메뉴로</button>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="game.js"></script>
</body>
</html>
